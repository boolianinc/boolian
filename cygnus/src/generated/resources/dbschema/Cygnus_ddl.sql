    
-- ###########################################
-- # Drop entities
-- ###########################################

-- Many to many relations
    
-- Normal entities
DROP TABLE IF EXISTS CODETABLEDETAIL;
DROP TABLE IF EXISTS LANGUAGE;
DROP TABLE IF EXISTS CODETABLEHEADER;


-- ###########################################
-- # Create new entities
-- ###########################################

-- Normal entities
    
CREATE TABLE CODETABLEHEADER (
  ID BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  NAME VARCHAR(100) NOT NULL,
  DESCRIPTION VARCHAR(100),
  CREATEDDATE TIMESTAMP,
  CREATEDBY VARCHAR(50),
  LASTUPDATED TIMESTAMP,
  LASTUPDATEDBY VARCHAR(50),
  VERSION BIGINT NOT NULL,
  CONSTRAINT UNIQUE (NAME)
	

);

CREATE TABLE LANGUAGE (
  ID BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  CHAR2CODE VARCHAR(100) NOT NULL,
  CHAR3CODE VARCHAR(100),
  NAME VARCHAR(100) NOT NULL,
  CREATEDDATE TIMESTAMP,
  CREATEDBY VARCHAR(50),
  LASTUPDATED TIMESTAMP,
  LASTUPDATEDBY VARCHAR(50),
  VERSION BIGINT NOT NULL,
  CONSTRAINT UNIQUE (CHAR2CODE)
	

);

CREATE TABLE CODETABLEDETAIL (
  ID BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  NAME VARCHAR(100) NOT NULL,
  CODE VARCHAR(100) NOT NULL,
  DESCRIPTION VARCHAR(100),
  CREATEDDATE TIMESTAMP,
  CREATEDBY VARCHAR(50),
  LASTUPDATED TIMESTAMP,
  LASTUPDATEDBY VARCHAR(50),
  VERSION BIGINT NOT NULL,
  CODETABLEHEADER BIGINT NOT NULL,
  LANGID BIGINT NOT NULL,
  CONSTRAINT UNIQUE (NAME)
	

);
  
  
-- Reference from CodeTableDetail.CODETABLEHEADER to CodeTableHeader
ALTER TABLE CODETABLEDETAIL ADD CONSTRAINT FK_CODETABLEDETAIL_CODETABLEHEADER
  FOREIGN KEY (CODETABLEHEADER) REFERENCES CODETABLEHEADER(ID);
-- Reference from CodeTableDetail.LANGID to Language
ALTER TABLE CODETABLEDETAIL ADD CONSTRAINT FK_CODETABLEDETAIL_LANGID
  FOREIGN KEY (LANGID) REFERENCES LANGUAGE(ID);
  
	
-- Many to many relations

    